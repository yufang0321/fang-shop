"use strict";(self["webpackChunkfang_shop"]=self["webpackChunkfang_shop"]||[]).push([[109],{109:function(t,o,n){n.r(o),n.d(o,{default:function(){return $}});var s=n(3396),l=n(7139),e=n(9242);const i={class:"container"},a={class:"row mt-4"},d={class:"col-md-7"},u={class:"table align-middle"},r=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"圖片"),(0,s._)("th",null,"商品名稱"),(0,s._)("th",null,"價格"),(0,s._)("th",null,"數量"),(0,s._)("th")])],-1),c={style:{width:"200px"}},p=["onClick"],g={key:0,class:"h5"},h={key:1,class:"h6"},b={key:2,class:"h5"},y={class:"btn-toolbar justify-content-between",role:"toolbar","aria-label":"Toolbar with button groups"},_={class:"btn-group",role:"group","aria-label":"First group"},k=["onClick"],m=["onUpdate:modelValue"],w=["onClick"],v={class:"btn-group btn-group-sm"},C=["onClick"],f=["disabled","onClick"],q={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},D=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),x=[D];function I(t,o,n,D,I,z){const L=(0,s.up)("LoadingComponent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(L,{active:t.isLoading},null,8,["active"]),(0,s._)("div",i,[(0,s._)("div",a,[(0,s._)("div",d,[(0,s._)("table",u,[r,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(I.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",c,[(0,s._)("div",{style:(0,l.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,s._)("td",null,[(0,s._)("a",{class:"text-dark",onClick:o=>z.getProduct(t.id)},(0,l.zw)(t.title),9,p)]),(0,s._)("td",null,[t.price?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",g,(0,l.zw)(t.origin_price)+" 元",1)),t.price?((0,s.wg)(),(0,s.iD)("del",h,"原價 "+(0,l.zw)(t.origin_price)+" 元",1)):(0,s.kq)("",!0),t.price?((0,s.wg)(),(0,s.iD)("div",b,"現在只要 "+(0,l.zw)(t.price)+" 元",1)):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s._)("div",y,[(0,s._)("div",_,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>z.deleteQty(t)},"-",8,k),(0,s.wy)((0,s._)("input",{type:"number",class:"form-control","onUpdate:modelValue":o=>t.qty=o},null,8,m),[[e.nr,t.qty]]),(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>z.addQty(t)},"+",8,w)])])]),(0,s._)("td",null,[(0,s._)("div",v,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:o=>z.getProduct(t.id)}," 查看更多 ",8,C),(0,s._)("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===t.id,onClick:o=>z.addCart(t.id,t.qty)},[this.status.loadingItem===t.id?((0,s.wg)(),(0,s.iD)("div",q,x)):(0,s.kq)("",!0),(0,s.Uk)(" 加到購物車 ")],8,f)])])])))),128))])])])])])],64)}n(560);var z={data(){return{products:[],product:{},status:{loadingItem:""}}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/yufang-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products.filter(((t,o,n)=>(t.qty=0,t))),console.log("products:",this.products),this.isLoading=!1}))},getProduct(t){this.$router.push(`/user/product/${t}`)},addCart(t,o){const n="https://vue3-course-api.hexschool.io/api/yufang-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:o};this.$http.post(n,{data:s}).then((t=>{this.status.loadingItem="",console.log(t)})),console.log("item.id:",t,"item.qty:",o)},addQty(t){t.qty+=1},deleteQty(t){t.qty>0&&(t.qty-=1)}},created(){this.getProducts()}},L=n(89);const P=(0,L.Z)(z,[["render",I]]);var $=P}}]);
//# sourceMappingURL=109.3d3c61ac.js.map